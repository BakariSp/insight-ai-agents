# æµ‹è¯•æŠ¥å‘Šä¸ç”¨ä¾‹è®°å½•

> æ¯ä¸ªå¼€å‘é˜¶æ®µçš„æµ‹è¯•æŠ¥å‘Šï¼ˆpytest ç»“æœï¼‰ã€Live æµ‹è¯•æ—¥å¿—ï¼ˆçœŸå® LLM è°ƒç”¨ï¼‰å’ŒåŠŸèƒ½ç”¨ä¾‹ï¼ˆUse Casesï¼‰é›†ä¸­å­˜æ”¾äºæ­¤ç›®å½•ã€‚

---

## ç›®å½•ç»“æ„

```
docs/testing/
â”œâ”€â”€ README.md                          # æœ¬æ–‡ä»¶ â€” æµ‹è¯•æ–‡æ¡£å¯¼èˆª
â”œâ”€â”€ phase4-test-report.md              # Phase 4 â€” ç»Ÿä¸€ä¼šè¯ç½‘å…³ æµ‹è¯•æŠ¥å‘Š
â”œâ”€â”€ phase4-conversation-log.md         # Phase 4 â€” Live å¯¹è¯æ—¥å¿— (7 åœºæ™¯)
â”œâ”€â”€ phase4.5-test-report.md            # Phase 4.5 â€” å¥å£®æ€§å¢å¼º æµ‹è¯•æŠ¥å‘Š + Use Cases
â”œâ”€â”€ phase4.5-conversation-log.md       # Phase 4.5 â€” Live å¯¹è¯æ—¥å¿— (15 åœºæ™¯)
â””â”€â”€ (åç»­ Phase æŒ‰åŒæ ·æ ¼å¼æ·»åŠ )
```

---

## å„é˜¶æ®µæµ‹è¯•æ¦‚è§ˆ

| Phase | é˜¶æ®µåç§° | æµ‹è¯•æ€»æ•° | æ–°å¢æµ‹è¯• | æµ‹è¯•æŠ¥å‘Š | Live æ—¥å¿— | å…³é”® Use Cases |
|-------|---------|---------|---------|---------|----------|---------------|
| 4 | ç»Ÿä¸€ä¼šè¯ç½‘å…³ | 151 | 59 | [æŠ¥å‘Š](phase4-test-report.md) | [æ—¥å¿—](phase4-conversation-log.md) | 7 ç§ action è·¯ç”±ã€ç½®ä¿¡åº¦è¾¹ç•Œã€é—­ç¯æµç¨‹ |
| 4.5 | å¥å£®æ€§å¢å¼º | 222â†’230 | 71â†’79 | [æŠ¥å‘Š](phase4.5-test-report.md) | [æ—¥å¿—](phase4.5-conversation-log.md) | å®ä½“è§£æ 12 ç§åœºæ™¯ã€å¤šè½®äº¤äº’æµç¨‹ã€é”™è¯¯æ‹¦æˆª |
| 5 | Java åç«¯å¯¹æ¥ | 238 | 8 | â€” | â€” | Adapter æ˜ å°„ã€é‡è¯•/ç†”æ–­é™çº§ã€mock fallback |
| 6 | å‰ç«¯é›†æˆ + SSE å‡çº§ + Patch | ğŸ”„ è¿›è¡Œä¸­ | â€” | â€” | â€” | SSE äº‹ä»¶æ¨¡å‹åºåˆ—åŒ– (Step 6.1 âœ…) |

---

## æ–‡æ¡£è§„èŒƒ

æ¯ä¸ªé˜¶æ®µåº”åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼ˆæŒ‰éœ€ï¼‰:

### 1. æµ‹è¯•æŠ¥å‘Š (`phaseX-test-report.md`)

è®°å½• pytest è‡ªåŠ¨åŒ–æµ‹è¯•ç»“æœ:

- **æ€»ä½“æ¦‚è§ˆ**: æµ‹è¯•æ€»æ•°ã€é€šè¿‡/å¤±è´¥ã€è¿è¡Œç¯å¢ƒ
- **æµ‹è¯•æ¨¡å—æ¸…å•**: å„æµ‹è¯•æ–‡ä»¶çš„æµ‹è¯•æ•°å’Œè¦†ç›–èŒƒå›´
- **å„æ¨¡å—æµ‹è¯•è¯¦æƒ…**: æ¯æ¡æµ‹è¯•çš„è¾“å…¥/é¢„æœŸ/ç»“æœ
- **Use Case Examples**: å…¸å‹åŠŸèƒ½ç”¨ä¾‹çš„å®Œæ•´äº¤äº’æµç¨‹è¯´æ˜
- **æ•°æ®æ¨¡å‹ç¤ºä¾‹**: å…³é”® JSON è¯·æ±‚/å“åº”æ ·æœ¬
- **å›å½’æµ‹è¯•ç»“æœ**: ç¡®è®¤æ—§åŠŸèƒ½æœªå—å½±å“

### 2. Live å¯¹è¯æ—¥å¿— (`phaseX-conversation-log.md`)

è®°å½•çœŸå® LLM è°ƒç”¨çš„ç«¯åˆ°ç«¯æµ‹è¯•:

- **è¯·æ±‚/å“åº”**: å®Œæ•´çš„ HTTP è¯·æ±‚ä½“å’Œå“åº”ä½“
- **è€—æ—¶**: æ¯æ¬¡è°ƒç”¨çš„å“åº”æ—¶é—´
- **åœºæ™¯åˆ†ç±»**: æŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç»„ (å¦‚ A.ç­çº§è§£æ / B.å­¦ç”Ÿè§£æ / C.å¤šè½®äº¤äº’)
- **æ±‡æ€»è¡¨**: æ‰€æœ‰æµ‹è¯•åœºæ™¯çš„ç»“æœä¸€è§ˆ

### 3. å‘½åçº¦å®š

```
docs/testing/phaseX-test-report.md          # pytest æµ‹è¯•æŠ¥å‘Š
docs/testing/phaseX-conversation-log.md     # Live å¯¹è¯æ—¥å¿—
docs/testing/phaseX.Y-test-report.md        # å­é˜¶æ®µæµ‹è¯•æŠ¥å‘Š
docs/testing/phaseX.Y-conversation-log.md   # å­é˜¶æ®µ Live æ—¥å¿—
```

---

## åŠŸèƒ½ç”¨ä¾‹ç´¢å¼• (Use Cases)

### Phase 4 â€” ç»Ÿä¸€ä¼šè¯ç½‘å…³

| # | åœºæ™¯ | Action | æè¿° |
|---|------|--------|------|
| 1 | é—²èŠ "ä½ å¥½" | chat_smalltalk | å‹å¥½å›å¤ + åŠŸèƒ½å¼•å¯¼ |
| 2 | QA "KPIæ˜¯ä»€ä¹ˆ" | chat_qa | æ•™è‚²é¢†åŸŸçŸ¥è¯†é—®ç­” |
| 3 | æ¨¡ç³Šè¯·æ±‚ "åˆ†æè‹±è¯­è¡¨ç°" | clarify | åé—® â†’ ç­çº§é€‰é¡¹åˆ—è¡¨ |
| 4 | æ˜ç¡®è¯·æ±‚ "åˆ†æ Form 1A è‹±è¯­æˆç»©" | build_workflow | Blueprint ç”Ÿæˆ |
| 5 | è¿½é—® "å“ªäº›å­¦ç”Ÿéœ€è¦å…³æ³¨ï¼Ÿ" | chat | åŸºäºé¡µé¢æ•°æ®å›å¤ |
| 6 | å¾®è°ƒ "åªæ˜¾ç¤ºä¸åŠæ ¼å­¦ç”Ÿ" | refine | æ–° Blueprint |
| 7 | é‡å»º "åŠ è¯­æ³•åˆ†ææ¨¡å—" | rebuild | å…¨æ–° Blueprint |

### Phase 4.5 â€” å®ä½“è§£æä¸å¥å£®æ€§

| # | åœºæ™¯ | Action | æè¿° |
|---|------|--------|------|
| 1 | å•ç­ç²¾ç¡®åŒ¹é… "Form 1A" | build_workflow | ç²¾ç¡®è§£æ â†’ è‡ªåŠ¨ç”Ÿæˆ |
| 2 | ä¸­æ–‡åˆ«å "1Aç­" / "F1A" | build_workflow | åˆ«ååŒ¹é… (confidence=1.0) |
| 3 | å¤šç­å¯¹æ¯” "1A å’Œ 1B" | build_workflow | å¤šç­è‡ªåŠ¨è§£æ |
| 4 | å¹´çº§å±•å¼€ "Form 1 å…¨å¹´çº§" | build_workflow | å¹´çº§ä¸‹æ‰€æœ‰ç­çº§å±•å¼€ |
| 5 | ç­çº§+å­¦ç”Ÿ "1A ç­å­¦ç”Ÿ Wong Ka Ho" | build_workflow | è”åˆè§£æ class + student |
| 6 | å­¦ç”Ÿ+å·²æœ‰ context "å­¦ç”Ÿ Li Mei" | build_workflow | ä¾èµ– context.classId è§£æ |
| 7 | ç¼ºç­çº§ä¸Šä¸‹æ–‡ "å­¦ç”Ÿ Wong Ka Ho" | clarify | missing_context â†’ ç­çº§é€‰é¡¹ |
| 8 | ä½œä¸šè§£æ "1A ç­ Unit 5 Test" | build_workflow | è”åˆè§£æ class + assignment |
| 9 | ä¸å­˜åœ¨ç­çº§ "2Cç­" | â€” | ä¼˜é›…é™çº§ (scope=none) |
| 10 | æ­§ä¹‰åŒ¹é… "F1" | clarify | å¤šæ¨¡ç³Šç»“æœ â†’ é€‰é¡¹ç¡®è®¤ |
| 11 | context å·²æœ‰ classId | build_workflow | è·³è¿‡è§£æ â†’ ç›´æ¥ build |
| 12 | è‹±æ–‡å…³é”®è¯ "student Chan Tai Man" | build_workflow | è‹±æ–‡è§¦å‘å­¦ç”Ÿè§£æ |

### Phase 5 â€” Java åç«¯å¯¹æ¥

| # | åœºæ™¯ | æè¿° |
|---|------|------|
| 1 | Java API æ­£å¸¸è°ƒç”¨ | adapter â†’ java_client â†’ çœŸå®æ•°æ® |
| 2 | Java 500 é”™è¯¯ | é‡è¯• 3 æ¬¡ â†’ mock fallback |
| 3 | Java è¶…æ—¶ | æŒ‡æ•°é€€é¿ â†’ ç†”æ–­ â†’ mock fallback |
| 4 | è¿ç»­å¤±è´¥è§¦å‘ç†”æ–­ | 5 æ¬¡å¤±è´¥ â†’ OPEN â†’ å¿«é€Ÿ mock |
| 5 | ç†”æ–­æ¢å¤ | HALF_OPEN æ¢æµ‹ â†’ CLOSED |
| 6 | USE_MOCK_DATA=true | é…ç½®å¼€å…³ç›´æ¥ä½¿ç”¨ mock |

### Phase 6 â€” å‰ç«¯é›†æˆ + SSE å‡çº§ + Patchï¼ˆè¿›è¡Œä¸­ï¼‰

| # | åœºæ™¯ | æè¿° | çŠ¶æ€ |
|---|------|------|------|
| 1 | SSE äº‹ä»¶æ¨¡å‹åºåˆ—åŒ– | BlockStartEvent / SlotDeltaEvent / BlockCompleteEvent camelCase è¾“å‡º | âœ… Step 6.1 |
| 2 | Block äº‹ä»¶æµ | BLOCK_START â†’ SLOT_DELTA â†’ BLOCK_COMPLETE é¡ºåº | ğŸ”² Step 6.2 |
| 3 | Per-Block AI ç”Ÿæˆ | å„ component_type ç‹¬ç«‹ LLM ç”Ÿæˆ | ğŸ”² Step 6.3 |
| 4 | Patch Layout | refine "æ”¹é¢œè‰²" â†’ æ—  LLM è°ƒç”¨ | ğŸ”² Step 6.4 |
| 5 | Patch Compose | refine "ç¼©çŸ­åˆ†æ" â†’ åªé‡ç”Ÿæˆ AI blocks | ğŸ”² Step 6.4 |
| 6 | E2E å…¨ç”Ÿå‘½å‘¨æœŸ | prompt â†’ Blueprint â†’ BLOCK äº‹ä»¶ â†’ Patch â†’ é™çº§ | ğŸ”² Step 6.5 |
